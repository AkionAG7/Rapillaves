{% extends "base.html" %}
{% load icons %}
{% block content %}
    <div class="container">
        <h1>Inventario</h1>
    
        <div class="inventory_options">
            <input class="filtro_nombre" type="text" placeholder="Buscar por nombre">
            <button class="btn_add" onclick="openModal()">Agregar producto</button>
        </div>
        <table>
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Precio</th>
                    <th>Stock</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for producto in productos %}
                <tr>
                    <td>{{producto.name}}</td>
                    <td>{{producto.price}} CRC</td>
                    <td>{{producto.stock}}</td>
                    <td>
                        <div class="btn_actions">
                            <a href="{% url 'producto' producto.id %}">
                                <i class="fa-solid fa-eye" style="color: #0a0a0a;"></i>
                            </a>
                            <a href="{% url 'inventory_update' producto.id %}">
                                <i class="fa-solid fa-pen-to-square" style="color: #030303;"></i>
                            </a>
                            <a href="#" class="btn-status" data-id="{{producto.id}}" data-name="{{producto.name}}">
                                <i class="fa-solid fa-delete-left" style="color: #000000;"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3">No se encuentran productos registrados</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

<script>
document.querySelectorAll(".btn-status").forEach(btn => {
  btn.addEventListener("click", (e) => {
    e.preventDefault();

    const productId = btn.dataset.id;
    const productName = btn.dataset.name;

    openStatusInventoryModal(productId, productName);
  });
});
</script>
{% include "inventory/modals/inventory_modal.html" %}
{% include "inventory/modals/inventory_show_modal.html" %}
{% include "inventory/modals/inventory_change_status_modal.html" %}
{% endblock %}